# 張老師台北心理諮商所 - 心理健康與諮商服務平台

## 📌 專案概述

本專案為「張老師台北心理諮商所」的全棧心理健康與諮商服務平台，採用現代化前後端分離架構，提供完整的心理諮商預約、測驗、文章管理及數據分析功能。

### 🏗️ 技術架構

**後端 (Django + DRF)**
- Django 4.2+ 核心框架
- Django REST Framework 提供 RESTful API
- MySQL 資料庫
- JWT 認證機制
- CKEditor 富文本編輯器
- Django Admin 管理介面

**前端 (Next.js + React)**
- Next.js 15.2.4 框架
- React 19 組件化開發
- TypeScript 型別安全
- Tailwind CSS 樣式框架
- shadcn/ui 組件庫
- 響應式設計

---

## ✨ 核心功能模組

### 🔐 使用者管理系統 (users)

**創新的「預約即註冊」機制**
- 無需傳統註冊流程，用戶填寫預約表單即自動建立帳號
- 使用 Email + 身分證字號作為身份驗證
- 身分證資料採用 SHA256 雜湊加密儲存，確保個資安全
- 支援管理員、心理師、一般用戶三種角色權限

**技術特色：**
- 自訂 User 模型繼承 AbstractUser
- 雜湊密碼驗證機制防止明文儲存
- 簡化用戶體驗，降低進入門檻

### 👥 心理師管理系統 (therapists)

**專業心理師檔案管理**
- 心理師個人簡介、學歷、經歷、證照資訊
- 專業領域標籤系統，支援多專長分類
- 諮商信念與治療理念描述
- 專業照片展示

**時段管理系統**
- `AvailableTime`: 週期性排班設定（每週固定時段）
- `AvailableSlot`: 具體可預約時段管理
- 自動化時段衝突檢測
- 預約後自動標記時段為已佔用

**前端展示功能**
- 心理師列表頁面，支援專業領域篩選
- 個人詳細介紹頁面
- 響應式卡片設計

### 📅 預約管理系統 (appointments)

**智能預約流程**
- 用戶可選擇多個偏好時段（日期+時段組合）
- 支援線上/實體諮商方式選擇
- 可指定特定心理師或由系統推薦
- 緊急程度評估（低/中/高）

**預約狀態管理**
- `pending`: 待確認
- `confirmed`: 已確認
- `completed`: 已完成
- `cancelled`: 已取消

**詳細資訊收集**
- 個案姓名、聯絡電話
- 主要關注議題描述
- 過往諮商經驗
- 特殊需求說明

**出席狀態追蹤**
- 出席確認功能
- 遲到、請假、未到等狀態管理
- 出席時間記錄

**自動化通知系統**
- 預約建立時自動發送確認郵件
- 24小時前提醒通知（用戶和心理師）
- 2小時前最後提醒
- 支援郵件排程和重試機制

### 🧠 心理測驗系統 (assessments)

**標準化測驗工具**
- **WHO-5 幸福感量表**: 評估整體幸福感指數
- **BSRS-5 簡式健康量表**: 篩檢心理困擾程度

**智能評分系統**
- WHO-5: 原始分數×4轉換為0-100分，自動分級（良好/中度關注/需要關注）
- BSRS-5: 前5題主分數+第6題自殺風險評估，特殊風險警示

**風險評估機制**
- 自動化風險等級判定
- 高風險個案特別標記
- 為預約時提供參考資訊

**匿名與實名測驗**
- 支援匿名測驗
- 登入用戶可查看歷史紀錄
- 測驗結果可供心理師參考

### 📝 文章管理系統 (articles)

**豐富的內容管理**
- CKEditor 富文本編輯器，支援圖片上傳
- 文章摘要自動生成
- 特色圖片展示
- 標籤分類系統

**多媒體支援**
- 文章內嵌圖片管理
- 圖片自動壓縮和優化
- 響應式圖片顯示

**前端展示**
- 文章列表頁面，支援標籤篩選
- 文章詳細頁面，排版優美
- 相關文章推薦

### 📢 最新消息系統 (announcements)

**公告分類管理**
- 多層分類系統
- 分類顏色標籤
- 分類排序功能

**發布排程功能**
- 草稿、已發布、已封存狀態管理
- 定時發布功能
- 過期自動隱藏

**首頁整合**
- 置頂公告優先顯示
- 首頁快速預覽
- 瀏覽次數統計

**富媒體支援**
- CKEditor 內容編輯
- 特色圖片和附加圖片
- 圖片自動壓縮

### 📊 數據分析系統 (analytics)

**訪客行為追蹤**
- 訪客會話記錄（IP、瀏覽器、設備資訊）
- 頁面瀏覽統計
- 停留時間分析
- 跳出率計算

**地理位置分析**
- 訪客國家、城市資訊
- UTM 來源追蹤
- 推薦來源分析

**統計報表生成**
- 每日統計數據自動生成
- 熱門頁面排行
- 用戶行為模式分析
- 管理員專用數據儀表板

---

## 🌟 創新特色

### 1. 預約即註冊機制
- 打破傳統註冊流程，用戶填寫預約表單即完成帳號建立
- 大幅降低使用門檻，提升用戶體驗
- 個資安全保護，身分證採用雜湊加密

### 2. 智能預約系統
- 支援多時段偏好選擇
- 管理員後台靈活時段調配
- 自動化郵件通知系統
- 完整出席狀態管理

### 3. 專業測驗整合
- 標準化心理測驗工具
- 智能風險評估
- 測驗結果與預約系統整合
- 為心理師提供個案參考資訊

### 4. 全面數據分析
- 網站訪客行為完整追蹤
- 使用者體驗優化數據支援
- 營運決策參考依據

### 5. 響應式設計
- 手機、平板、桌面全設備支援
- 優美的視覺設計
- 流暢的互動體驗

---

## 🏛️ 系統架構

```
Frontend (Next.js)
├── 首頁（介紹/導引）
├── 心理師介紹頁（團隊展示）
├── 心理健康文章（知識分享）
├── 最新消息（公告資訊）
├── 心理測驗（WHO-5、BSRS-5）
├── 預約諮詢（線上預約）
├── 預約查詢（Email + 身分證登入）
└── 管理員登入（Django Admin）

Backend (Django + DRF)
├── users（使用者管理、身分驗證）
├── therapists（心理師檔案、時段管理）
├── appointments（預約流程、狀態管理、通知系統）
├── assessments（心理測驗、風險評估）
├── articles（文章管理、富文本編輯）
├── announcements（公告系統、分類管理）
├── analytics（數據分析、訪客追蹤）
└── admin（Django 管理介面）

Database (MySQL)
├── 使用者資料表
├── 心理師檔案表
├── 預約記錄表
├── 測驗結果表
├── 文章內容表
├── 公告資訊表
└── 分析數據表
```

---

## 👤 使用者角色權限

| 角色 | 權限描述 |
|------|----------|
| **一般用戶** | 瀏覽文章、進行心理測驗、預約諮商、查詢預約記錄 |
| **心理師** | 查看個案資訊、管理個人檔案、檢視預約行程、存取測驗結果 |
| **管理員** | 全系統管理、用戶管理、預約調配、內容發布、數據分析 |

---

## 🚀 部署說明

### 後端部署 (Django)
1. 進入後端目錄：`cd backend`
2. 安裝相依套件：`pip install -r requirements.txt`
3. 設定環境變數（資料庫、郵件等）
4. 執行資料庫遷移：`python manage.py migrate`
5. 建立超級用戶：`python manage.py createsuperuser`
6. 初始化測驗資料：`python manage.py init_who5` 和 `python manage.py init_bsrs5`
7. 啟動服務：`python manage.py runserver`

### 前端部署 (Next.js)
1. 進入前端目錄：`cd fornt`
2. 安裝相依套件：`npm install`
3. 設定環境變數（API 地址等）
4. 建置專案：`npm run build`
5. 啟動服務：`npm start`

---

## 🔧 主要技術特點

### 安全性
- JWT 認證機制
- 身分證雜湊加密
- CSRF 防護
- SQL 注入防護
- XSS 防護

### 效能優化
- 圖片自動壓縮
- 數據庫查詢優化
- 前端組件懶加載
- API 響應快取

### 易用性
- 直觀的使用者介面
- 響應式設計
- 無障礙設計考量
- 豐富的互動回饋

---

## 📱 功能特色詳述

### 首頁設計
- 互動式熱區設計，點擊人物可直接進入對應功能
- 最新消息布告欄實時更新
- 諮商室環境輪播展示
- 社群媒體連結整合（Instagram、Facebook、LINE、Threads）

### 預約流程
1. **選擇心理師或專業領域**
2. **填寫個人資訊和身分驗證**
3. **選擇諮商方式（線上/實體）**
4. **選擇多個偏好時段**
5. **描述關注議題和特殊需求**
6. **提交預約，系統自動建立帳號**
7. **管理員確認並安排具體時間**
8. **自動發送確認通知**

### 心理測驗流程
1. **選擇測驗類型（WHO-5 或 BSRS-5）**
2. **閱讀測驗說明**
3. **依序回答問題**
4. **自動計分和風險評估**
5. **查看結果和建議**
6. **選擇性保存結果（需註冊）**

---

## 🔄 系統整合流程

### 預約與測驗整合
- 高風險測驗結果可觸發優先預約
- 心理師可查看個案測驗歷史
- 測驗結果協助評估緊急程度

### 內容管理整合
- 文章和公告支援富文本編輯
- 圖片自動優化和 CDN 整合
- SEO 友善的 URL 結構

### 數據分析整合
- 訪客行為與業務指標關聯
- 預約轉換率分析
- 內容效果評估

---

本系統致力於提供專業、安全、易用的心理諮商服務平台，結合現代化技術與心理健康專業知識，為使用者提供最佳的服務體驗。

## 📞 聯絡資訊

**張老師台北心理諮商所**
- 地址：台北市中山區大直街 20 巷 18 號
- 電話：(02) 2532-6180
- 服務時間：
  - 週一至週六：09:00 - 21:30
  - 週日：09:00 - 17:00

**交通方式**
- 🚇 捷運大直站 1 號出口，步行約 5 分鐘
- 🚌 公車站：大直站、捷運大直站
- 🚗 附近有路邊停車格及收費停車場