{% extends "emails/base_email.html" %}

{% block title %}æ–°é ç´„é€šçŸ¥ - å¿ƒç†è«®å•†é ç´„ç³»çµ±{% endblock %}

{% block header_title %}ğŸ“… æ–°é ç´„é€šçŸ¥{% endblock %}
{% block header_subtitle %}<p style="margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">æœ‰æ–°çš„é ç´„ç”³è«‹éœ€è¦æ‚¨çš„è™•ç†</p>{% endblock %}

{% block greeting %}
<p>è¦ªæ„›çš„ç®¡ç†å“¡ï¼Œæ‚¨å¥½ï¼š</p>
{% endblock %}

{% block content %}
<div class="alert info">
    <strong>ğŸ”” ç³»çµ±é€šçŸ¥</strong><br>
    æœ‰ä¸€ä½ç”¨æˆ¶å‰›å‰›æäº¤äº†æ–°çš„å¿ƒç†è«®å•†é ç´„ç”³è«‹ï¼Œè«‹ç›¡å¿«è™•ç†ã€‚
</div>

<p>é ç´„è©³ç´°è³‡è¨Šå¦‚ä¸‹ï¼š</p>
{% endblock %}

{% block appointment_details %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">é ç´„è³‡è¨Š</h3>
    
    <div class="appointment-detail">
        <span class="detail-label">é ç´„ç·¨è™Ÿï¼š</span>
        <span class="detail-value"><strong>#{{ appointment.id }}</strong></span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">ç”³è«‹äººå§“åï¼š</span>
        <span class="detail-value">{{ appointment.detail.name }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">è¯çµ¡é›»è©±ï¼š</span>
        <span class="detail-value">{{ appointment.detail.phone }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">é›»å­éƒµä»¶ï¼š</span>
        <span class="detail-value">{{ appointment.user.email }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">æŒ‡å®šå¿ƒç†å¸«ï¼š</span>
        <span class="detail-value">{{ appointment.therapist.name }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">ç”³è«‹æ™‚é–“ï¼š</span>
        <span class="detail-value">{{ appointment.created_at|date:"Yå¹´mæœˆdæ—¥ H:i" }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">ç›®å‰ç‹€æ…‹ï¼š</span>
        <span class="detail-value">
            <span style="background-color: #fef3cd; color: #856404; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                å¾…ç¢ºèª
            </span>
        </span>
    </div>
</div>

<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">åå¥½æ™‚æ®µ</h3>
    {% for period in appointment.preferred_periods.all %}
    <div class="appointment-detail">
        <span class="detail-label">æ™‚æ®µ {{ forloop.counter }}ï¼š</span>
        <span class="detail-value">
            {{ period.date|date:"Yå¹´mæœˆdæ—¥" }} 
            {% if period.period == 'morning' %}ä¸Šåˆ (09:00-12:00)
            {% elif period.period == 'afternoon' %}ä¸‹åˆ (13:00-17:00)
            {% elif period.period == 'evening' %}æ™šä¸Š (18:00-21:00)
            {% endif %}
        </span>
    </div>
    {% endfor %}
</div>

{% if appointment.detail.main_concerns %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">ä¸»è¦å›°æ“¾</h3>
    <p style="margin: 0; padding: 10px; background-color: white; border-radius: 4px; border: 1px solid #e2e8f0;">
        {{ appointment.detail.main_concerns }}
    </p>
</div>
{% endif %}

{% if appointment.detail.previous_therapy %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">éå¾€è«®å•†ç¶“é©—</h3>
    <p style="margin: 0; padding: 10px; background-color: white; border-radius: 4px; border: 1px solid #e2e8f0;">
        {{ appointment.detail.previous_therapy }}
    </p>
</div>
{% endif %}

{% if appointment.detail.urgency %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">ç·Šæ€¥ç¨‹åº¦</h3>
    <div class="appointment-detail">
        <span class="detail-value">
            {% if appointment.detail.urgency == 'low' %}ğŸŸ¢ ä½ - å¯ç­‰å¾…é©ç•¶æ™‚æ©Ÿå®‰æ’
            {% elif appointment.detail.urgency == 'medium' %}ğŸŸ¡ ä¸­ - å¸Œæœ›å„˜å¿«å®‰æ’
            {% elif appointment.detail.urgency == 'high' %}ğŸ”´ é«˜ - éœ€è¦ç·Šæ€¥è™•ç†
            {% endif %}
        </span>
    </div>
</div>
{% endif %}

{% if appointment.detail.special_needs %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">ç‰¹æ®Šéœ€æ±‚</h3>
    <p style="margin: 0; padding: 10px; background-color: white; border-radius: 4px; border: 1px solid #e2e8f0;">
        {{ appointment.detail.special_needs }}
    </p>
</div>
{% endif %}
{% endblock %}

{% block actions %}
<div style="text-align: center; margin: 30px 0;">
    <p><strong>è«‹ç›¡å¿«è™•ç†æ­¤é ç´„ç”³è«‹</strong></p>
    <a href="{{ admin_url }}" class="button">å‰å¾€ç®¡ç†å¾Œå°è™•ç†</a>
</div>
{% endblock %}

{% block additional_info %}
<div class="divider"></div>
<div class="alert warning">
    <strong>â° è™•ç†æé†’</strong><br>
    è«‹åœ¨ 24 å°æ™‚å…§å›è¦†é ç´„ç”³è«‹ï¼Œä»¥ç¶­æŒè‰¯å¥½çš„æœå‹™å“è³ªã€‚å¦‚éœ€æ›´æ”¹å¿ƒç†å¸«å®‰æ’æˆ–æ™‚æ®µï¼Œè«‹ç›´æ¥åœ¨ç®¡ç†å¾Œå°æ“ä½œã€‚
</div>
{% endblock %}