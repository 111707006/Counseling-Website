{% extends "emails/base_email.html" %}

{% block title %}預約時間確認 - 心理諮商預約系統{% endblock %}

{% block header_title %}🎯 預約時間已確認{% endblock %}
{% block header_subtitle %}<p style="margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">您的心理諮商時間已安排完成</p>{% endblock %}

{% block greeting %}
<p>親愛的 {{ appointment.detail.name }} 先生/小姐，您好：</p>
{% endblock %}

{% block content %}
<div class="alert success">
    <strong>🎉 好消息！</strong><br>
    您的心理諮商預約時間已經確認，請記下以下資訊並準時赴約。
</div>
{% endblock %}

{% block appointment_details %}
<div class="appointment-card" style="border-left: 4px solid #48bb78; background: linear-gradient(135deg, #f0fff4 0%, #f7fafc 100%);">
    <h3 style="margin-top: 0; color: #48bb78;">✅ 確認的預約時間</h3>
    
    <div style="text-align: center; padding: 20px; background-color: white; border-radius: 8px; margin: 15px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div style="font-size: 24px; font-weight: bold; color: #48bb78; margin-bottom: 10px;">
            📅 {{ confirmed_datetime|date:"Y年m月d日" }}
        </div>
        <div style="font-size: 32px; font-weight: bold; color: #2d3748; margin-bottom: 5px;">
            ⏰ {{ confirmed_datetime|date:"H:i" }}
        </div>
        <div style="font-size: 14px; color: #666; background-color: #f7fafc; padding: 5px 10px; border-radius: 15px; display: inline-block;">
            {{ confirmed_datetime|date:"l" }}
        </div>
    </div>
</div>

<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">預約詳細資訊</h3>
    
    <div class="appointment-detail">
        <span class="detail-label">預約編號：</span>
        <span class="detail-value"><strong style="color: #667eea;">#{{ appointment.id }}</strong></span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">心理師：</span>
        <span class="detail-value"><strong>{{ appointment.therapist.name }}</strong></span>
    </div>
    
    {% if appointment.consultation_room %}
    <div class="appointment-detail">
        <span class="detail-label">諮商室：</span>
        <span class="detail-value">🏢 {{ appointment.get_consultation_room_display }}</span>
    </div>
    {% endif %}
    
    {% if appointment.therapist.specialization %}
    <div class="appointment-detail">
        <span class="detail-label">專業領域：</span>
        <span class="detail-value">{{ appointment.therapist.specialization }}</span>
    </div>
    {% endif %}
    
    <div class="appointment-detail">
        <span class="detail-label">諮商地點：</span>
        <span class="detail-value">
            {% if appointment.therapist.office_location %}
                {{ appointment.therapist.office_location }}
            {% else %}
                請洽詢心理師或管理員
            {% endif %}
        </span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">聯絡電話：</span>
        <span class="detail-value">{{ appointment.detail.phone }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">確認時間：</span>
        <span class="detail-value">{{ appointment.confirmed_at|date:"Y年m月d日 H:i" }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">預約狀態：</span>
        <span class="detail-value">
            <span style="background-color: #c6f6d5; color: #22543d; padding: 4px 12px; border-radius: 15px; font-size: 12px;">
                ✅ 已確認
            </span>
        </span>
    </div>
</div>
{% endblock %}

{% block actions %}
<div style="text-align: center; margin: 30px 0;">
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 8px; margin: 20px 0;">
        <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px;">📍 重要資訊</div>
        <div>請在預約時間前 10 分鐘到達，並攜帶身分證明文件</div>
    </div>
</div>
{% endblock %}

{% block additional_info %}
<div class="divider"></div>

<div style="display: flex; gap: 20px; margin: 20px 0;">
    <div style="flex: 1; background-color: #f8f9fa; padding: 20px; border-radius: 6px;">
        <h4 style="margin-top: 0; color: #667eea;">📋 赴約準備</h4>
        <ul style="margin: 10px 0; padding-left: 20px; color: #555; line-height: 1.6;">
            <li>攜帶身分證明文件</li>
            <li>提前 10 分鐘到達</li>
            <li>保持手機暢通</li>
            <li>穿著舒適服裝</li>
        </ul>
    </div>
    <div style="flex: 1; background-color: #f8f9fa; padding: 20px; border-radius: 6px;">
        <h4 style="margin-top: 0; color: #667eea;">📞 緊急聯絡</h4>
        <p style="color: #555; line-height: 1.6;">
            如有緊急狀況需要調整時間：<br>
            📧 <a href="mailto:tpeap01@cyc.tw" style="color: #667eea;">tpeap01@cyc.tw</a><br>
            📱 請撥打預約專線
        </p>
    </div>
</div>

<div class="alert info">
    <strong>💡 首次諮商提醒</strong><br>
    <div style="margin-top: 10px; line-height: 1.6;">
        • 初次會談會了解您的狀況和需求，請放鬆心情<br>
        • 如有特殊需求或顧慮，可隨時與心理師討論<br>
        • 所有對話內容都會嚴格保密
    </div>
</div>

<div class="alert warning">
    <strong>⚠️ 取消/改期政策</strong><br>
    如需取消或改期，請至少提前 <strong>24 小時</strong> 通知，以免影響其他來談者的權益。<br>
    取消預約請回覆此郵件或撥打預約專線。
</div>

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 8px; margin: 30px 0; text-align: center;">
    <h3 style="margin: 0 0 15px 0;">🌟 期待與您見面</h3>
    <p style="margin: 0; font-size: 16px; opacity: 0.9;">
        感謝您對我們的信任，我們致力於提供專業、溫暖的心理諮商服務。<br>
        讓我們一起為您的心理健康努力！
    </p>
</div>
{% endblock %}

{% block footer %}
<p>祝您身心健康，期待與您見面。</p>
<div class="footer-links">
    <a href="mailto:tpeap01@cyc.tw">聯絡我們</a>
    <a href="#">預約查詢</a>
    <a href="#">服務說明</a>
    <a href="#">常見問題</a>
</div>
<p>&copy; 2025 心理諮商預約系統. 保留所有權利。</p>
{% endblock %}