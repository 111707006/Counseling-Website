{% extends "emails/base_email.html" %}

{% block title %}é ç´„æé†’ - å¿ƒç†å¸«é€šçŸ¥{% endblock %}

{% block header_title %}ğŸ“‹ é ç´„æé†’{% endblock %}
{% block header_subtitle %}<p style="margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">æ‚¨æ˜å¤©æœ‰ä¸€å ´è«®å•†é ç´„</p>{% endblock %}

{% block greeting %}
<p>è¦ªæ„›çš„ {{ appointment.therapist.name }} å¿ƒç†å¸«ï¼Œæ‚¨å¥½ï¼š</p>
{% endblock %}

{% block content %}
<div class="alert info">
    <strong>ğŸ“… é ç´„æé†’</strong><br>
    æ‚¨æ˜å¤©æœ‰ä¸€å ´å¿ƒç†è«®å•†é ç´„ï¼Œè«‹ç¢ºèªæ‚¨çš„è¡Œç¨‹å®‰æ’ã€‚
</div>
{% endblock %}

{% block appointment_details %}
<div class="appointment-card" style="border-left: 4px solid #667eea; background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);">
    <h3 style="margin-top: 0; color: #667eea;">ğŸ‘¨â€âš•ï¸ æ˜å¤©çš„é ç´„</h3>
    
    <div style="text-align: center; padding: 25px; background-color: white; border-radius: 8px; margin: 15px 0; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
        <div style="font-size: 28px; font-weight: bold; color: #667eea; margin-bottom: 10px;">
            ğŸ“… {{ appointment.slot.slot_time|date:"Yå¹´mæœˆdæ—¥" }}
        </div>
        <div style="font-size: 36px; font-weight: bold; color: #2d3748; margin-bottom: 10px;">
            â° {{ appointment.slot.slot_time|date:"H:i" }}
        </div>
        <div style="font-size: 14px; color: #666; background-color: #f7fafc; padding: 8px 15px; border-radius: 20px; display: inline-block;">
            æ˜å¤© {{ appointment.slot.slot_time|date:"l" }}
        </div>
    </div>
</div>

<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">ğŸ‘¤ ä¾†è«‡è€…è³‡è¨Š</h3>
    
    <div class="appointment-detail">
        <span class="detail-label">é ç´„ç·¨è™Ÿï¼š</span>
        <span class="detail-value"><strong style="color: #667eea;">#{{ appointment.id }}</strong></span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">ä¾†è«‡è€…å§“åï¼š</span>
        <span class="detail-value"><strong>{{ appointment.detail.name }}</strong></span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">è¯çµ¡é›»è©±ï¼š</span>
        <span class="detail-value">{{ appointment.detail.phone }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">é›»å­éƒµä»¶ï¼š</span>
        <span class="detail-value">{{ appointment.user.email }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">è«®å•†æ–¹å¼ï¼š</span>
        <span class="detail-value">
            {% if appointment.consultation_type == 'online' %}
                ğŸ–¥ï¸ ç·šä¸Šè«®å•†
            {% else %}
                ğŸ¢ å¯¦é«”è«®å•†
            {% endif %}
        </span>
    </div>
    
    {% if appointment.consultation_type == 'offline' and appointment.therapist.office_location %}
    <div class="appointment-detail">
        <span class="detail-label">è«®å•†åœ°é»ï¼š</span>
        <span class="detail-value">ğŸ“ {{ appointment.therapist.office_location }}</span>
    </div>
    {% endif %}
</div>

{% if appointment.detail.main_concerns %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">ğŸ’­ ä¸»è¦å›°æ“¾</h3>
    <div style="background-color: white; padding: 15px; border-radius: 6px; border: 1px solid #e2e8f0;">
        {{ appointment.detail.main_concerns }}
    </div>
</div>
{% endif %}

{% if appointment.detail.previous_therapy %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">ğŸ“‹ éå¾€ç¶“é©—</h3>
    <div class="appointment-detail">
        <span class="detail-label">æ›¾æ¥å—è«®å•†ï¼š</span>
        <span class="detail-value">
            {% if appointment.detail.previous_therapy %}
                âœ… æ˜¯
            {% else %}
                âŒ å¦ (é¦–æ¬¡è«®å•†)
            {% endif %}
        </span>
    </div>
</div>
{% endif %}

{% if appointment.detail.urgency %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">âš¡ ç·Šæ€¥ç¨‹åº¦</h3>
    <div class="appointment-detail">
        <span class="detail-value">
            {% if appointment.detail.urgency == 'low' %}
                ğŸŸ¢ ä½åº¦ - ä¸€èˆ¬é—œæ³¨
            {% elif appointment.detail.urgency == 'medium' %}
                ğŸŸ¡ ä¸­åº¦ - éœ€è¦é—œæ³¨
            {% elif appointment.detail.urgency == 'high' %}
                ğŸ”´ é«˜åº¦ - éœ€è¦å„ªå…ˆè™•ç†
            {% endif %}
        </span>
    </div>
</div>
{% endif %}

{% if appointment.detail.special_needs %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">ğŸ”§ ç‰¹æ®Šéœ€æ±‚</h3>
    <div style="background-color: white; padding: 15px; border-radius: 6px; border: 1px solid #e2e8f0;">
        {{ appointment.detail.special_needs }}
    </div>
</div>
{% endif %}
{% endblock %}

{% block additional_info %}
<div style="display: flex; gap: 20px; margin: 30px 0;">
    <div style="flex: 1; background-color: #f0fff4; padding: 20px; border-radius: 8px; border: 1px solid #9ae6b4;">
        <h4 style="margin-top: 0; color: #22543d;">âœ… æ˜å¤©è«‹ç¢ºèª</h4>
        <ul style="margin: 10px 0; padding-left: 20px; color: #22543d; line-height: 1.8;">
            <li>ç¢ºèªè«®å•†ç’°å¢ƒæº–å‚™å®Œæˆ</li>
            <li>æª¢æŸ¥æ™‚é–“å®‰æ’ç„¡è¡çª</li>
            {% if appointment.consultation_type == 'online' %}
            <li>æ¸¬è©¦ç·šä¸Šæœƒè­°è¨­å‚™</li>
            <li>æº–å‚™å®‰éœçš„è«®å•†ç’°å¢ƒ</li>
            {% else %}
            <li>ç¢ºèªè¨ºé–“æ¸…æ½”æ•´ç†</li>
            <li>æº–å‚™ç›¸é—œè«®å•†è³‡æ–™</li>
            {% endif %}
        </ul>
    </div>
    <div style="flex: 1; background-color: #ebf8ff; padding: 20px; border-radius: 8px; border: 1px solid #90cdf4;">
        <h4 style="margin-top: 0; color: #2a4365;">ğŸ’¡ å°ˆæ¥­æé†’</h4>
        <p style="color: #2a4365; line-height: 1.6; margin: 0;">
            {% if appointment.detail.previous_therapy %}
            <strong>æœ‰ç¶“é©—ä¾†è«‡è€…ï¼š</strong>å¯æ·±å…¥æ¢è¨æŒçºŒæ€§è­°é¡Œ
            {% else %}
            <strong>é¦–æ¬¡è«®å•†ï¼š</strong>å»ºè­°å¤šèŠ±æ™‚é–“å»ºç«‹é—œä¿‚å’Œèªªæ˜æµç¨‹
            {% endif %}
        </p>
    </div>
</div>

<div class="alert warning">
    <strong>ğŸ“ å¦‚éœ€èª¿æ•´</strong><br>
    å¦‚æœæ˜å¤©çš„æ™‚æ®µæœ‰è®Šå‹•éœ€æ±‚ï¼Œè«‹ç›¡å¿«è¯ç¹«ç®¡ç†åœ˜éšŠï¼š<br>
    ğŸ“§ <a href="mailto:tpeap01@cyc.tw" style="color: #744210; text-decoration: none;"><strong>tpeap01@cyc.tw</strong></a><br>
    âš ï¸ è«‹ç¢ºä¿æå‰é€šçŸ¥ä¾†è«‡è€…ä»»ä½•è®Šæ›´
</div>

<div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 25px; border-radius: 8px; margin: 30px 0; text-align: center;">
    <h3 style="margin: 0 0 15px 0;">ğŸ¤ å°ˆæ¥­æœå‹™æé†’</h3>
    <p style="margin: 0; font-size: 16px; opacity: 0.9;">
        æ„Ÿè¬æ‚¨ç‚ºä¾†è«‡è€…æä¾›å°ˆæ¥­çš„å¿ƒç†è«®å•†æœå‹™ã€‚<br>
        æ¯ä¸€æ¬¡çš„å°ˆæ¥­äº’å‹•éƒ½æ˜¯å¹«åŠ©ä»–äººæˆé•·çš„é‡è¦æ™‚åˆ»ã€‚
    </p>
</div>
{% endblock %}

{% block footer %}
<p>ç¥æ‚¨æ˜å¤©çš„è«®å•†é †åˆ©é€²è¡Œã€‚</p>
<div class="footer-links">
    <a href="mailto:tpeap01@cyc.tw">è¯çµ¡ç®¡ç†åœ˜éšŠ</a>
    <a href="#">é ç´„ç®¡ç†</a>
    <a href="#">å°ˆæ¥­è³‡æº</a>
</div>
<p>&copy; 2025 å¿ƒç†è«®å•†é ç´„ç³»çµ±. ä¿ç•™æ‰€æœ‰æ¬Šåˆ©ã€‚</p>
{% endblock %}