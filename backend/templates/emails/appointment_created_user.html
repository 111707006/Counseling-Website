{% extends "emails/base_email.html" %}

{% block title %}é ç´„ç”³è«‹ç¢ºèª - å¿ƒç†è«®å•†é ç´„ç³»çµ±{% endblock %}

{% block header_title %}âœ… é ç´„ç”³è«‹å·²æ”¶åˆ°{% endblock %}
{% block header_subtitle %}<p style="margin: 10px 0 0 0; font-size: 16px; opacity: 0.9;">æ„Ÿè¬æ‚¨çš„é ç´„ç”³è«‹ï¼Œæˆ‘å€‘å°‡ç›¡å¿«ç‚ºæ‚¨å®‰æ’</p>{% endblock %}

{% block greeting %}
<p>è¦ªæ„›çš„ {{ appointment.detail.name }} å…ˆç”Ÿ/å°å§ï¼Œæ‚¨å¥½ï¼š</p>
{% endblock %}

{% block content %}
<div class="alert success">
    <strong>ğŸ‰ é ç´„ç”³è«‹æˆåŠŸï¼</strong><br>
    æˆ‘å€‘å·²æ”¶åˆ°æ‚¨çš„å¿ƒç†è«®å•†é ç´„ç”³è«‹ï¼Œå°ˆæ¥­åœ˜éšŠå°‡åœ¨ 24 å°æ™‚å…§èˆ‡æ‚¨ç¢ºèªå…·é«”æ™‚é–“ã€‚
</div>

<p>ä»¥ä¸‹æ˜¯æ‚¨çš„é ç´„ç”³è«‹è©³ç´°è³‡è¨Šï¼Œè«‹å¦¥å–„ä¿å­˜æ­¤ä¿¡ä»¶ï¼š</p>
{% endblock %}

{% block appointment_details %}
<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">æ‚¨çš„é ç´„è³‡è¨Š</h3>
    
    <div class="appointment-detail">
        <span class="detail-label">é ç´„ç·¨è™Ÿï¼š</span>
        <span class="detail-value"><strong style="color: #667eea; font-size: 18px;">#{{ appointment.id }}</strong></span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">ç”³è«‹äººå§“åï¼š</span>
        <span class="detail-value">{{ appointment.detail.name }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">è¯çµ¡é›»è©±ï¼š</span>
        <span class="detail-value">{{ appointment.detail.phone }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">æŒ‡å®šå¿ƒç†å¸«ï¼š</span>
        <span class="detail-value">{{ appointment.therapist.name }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">ç”³è«‹æ™‚é–“ï¼š</span>
        <span class="detail-value">{{ appointment.created_at|date:"Yå¹´mæœˆdæ—¥ H:i" }}</span>
    </div>
    
    <div class="appointment-detail">
        <span class="detail-label">ç›®å‰ç‹€æ…‹ï¼š</span>
        <span class="detail-value">
            <span style="background-color: #fef3cd; color: #856404; padding: 4px 8px; border-radius: 4px; font-size: 12px;">
                â³ å¾…ç¢ºèª
            </span>
        </span>
    </div>
</div>

<div class="appointment-card">
    <h3 style="margin-top: 0; color: #667eea;">æ‚¨çš„åå¥½æ™‚æ®µ</h3>
    <p style="color: #666; margin-bottom: 15px; font-size: 14px;">æˆ‘å€‘å°‡å„ªå…ˆå®‰æ’ä»¥ä¸‹æ™‚æ®µï¼Œå¦‚æœ‰èª¿æ•´æœƒå¦è¡Œé€šçŸ¥ï¼š</p>
    {% for period in appointment.preferred_periods.all %}
    <div class="appointment-detail">
        <span class="detail-label">é¸æ“‡ {{ forloop.counter }}ï¼š</span>
        <span class="detail-value">
            <strong>{{ period.date|date:"Yå¹´mæœˆdæ—¥" }}</strong>
            {% if period.period == 'morning' %} ä¸Šåˆæ™‚æ®µ (09:00-12:00)
            {% elif period.period == 'afternoon' %} ä¸‹åˆæ™‚æ®µ (13:00-17:00)
            {% elif period.period == 'evening' %} æ™šä¸Šæ™‚æ®µ (18:00-21:00)
            {% endif %}
        </span>
    </div>
    {% endfor %}
</div>
{% endblock %}

{% block additional_info %}
<div class="divider"></div>

<div class="alert info">
    <strong>ğŸ“‹ æ¥ä¸‹ä¾†çš„æµç¨‹</strong><br>
    <div style="margin-top: 15px; line-height: 1.8;">
        <div>1. <strong>ç­‰å¾…ç¢ºèª</strong> - æˆ‘å€‘å°‡åœ¨ 24 å°æ™‚å…§ç¢ºèªæ‚¨çš„é ç´„æ™‚é–“</div>
        <div>2. <strong>æ”¶åˆ°é€šçŸ¥</strong> - ç¢ºèªå¾Œæœƒç™¼é€è©³ç´°çš„é ç´„é€šçŸ¥éƒµä»¶çµ¦æ‚¨</div>
        <div>3. <strong>æº–æ™‚èµ´ç´„</strong> - è«‹ä¾ç¢ºèªæ™‚é–“æº–æ™‚åˆ°é”è«®å•†åœ°é»</div>
    </div>
</div>

<div style="background-color: #f8f9fa; padding: 20px; border-radius: 6px; margin: 20px 0;">
    <h4 style="margin-top: 0; color: #667eea;">ğŸ“ éœ€è¦å”åŠ©ï¼Ÿ</h4>
    <p style="margin-bottom: 10px;">å¦‚æœæ‚¨éœ€è¦ï¼š</p>
    <ul style="margin: 10px 0; padding-left: 20px; color: #555;">
        <li>ä¿®æ”¹é ç´„è³‡è¨Š</li>
        <li>å–æ¶ˆé ç´„ç”³è«‹</li>
        <li>è«®è©¢ç›¸é—œå•é¡Œ</li>
    </ul>
    <p>è«‹éš¨æ™‚èˆ‡æˆ‘å€‘è¯ç¹«ï¼š<a href="mailto:tpeap01@cyc.tw" style="color: #667eea; text-decoration: none;"><strong>tpeap01@cyc.tw</strong></a></p>
</div>

<div class="alert warning">
    <strong>âš ï¸ é‡è¦æé†’</strong><br>
    â€¢ è«‹ä¿æŒæ‚¨çš„è¯çµ¡é›»è©±æš¢é€šï¼Œä»¥ä¾¿æˆ‘å€‘èˆ‡æ‚¨ç¢ºèªæ™‚é–“<br>
    â€¢ å¦‚éœ€å–æ¶ˆé ç´„ï¼Œè«‹è‡³å°‘æå‰ 24 å°æ™‚é€šçŸ¥<br>
    â€¢ é ç´„ç·¨è™Ÿ <strong>#{{ appointment.id }}</strong> è«‹å¦¥å–„ä¿å­˜ï¼Œå¾ŒçºŒè¯ç¹«æ™‚éœ€è¦æä¾›
</div>
{% endblock %}

{% block footer %}
<p>æ„Ÿè¬æ‚¨é¸æ“‡æˆ‘å€‘çš„å¿ƒç†è«®å•†æœå‹™ï¼ŒæœŸå¾…èˆ‡æ‚¨è¦‹é¢ã€‚</p>
<div class="footer-links">
    <a href="mailto:tpeap01@cyc.tw">è¯çµ¡æˆ‘å€‘</a>
    <a href="#">é ç´„æŸ¥è©¢</a>
    <a href="#">æœå‹™èªªæ˜</a>
</div>
<p>&copy; 2025 å¿ƒç†è«®å•†é ç´„ç³»çµ±. ä¿ç•™æ‰€æœ‰æ¬Šåˆ©ã€‚</p>
{% endblock %}